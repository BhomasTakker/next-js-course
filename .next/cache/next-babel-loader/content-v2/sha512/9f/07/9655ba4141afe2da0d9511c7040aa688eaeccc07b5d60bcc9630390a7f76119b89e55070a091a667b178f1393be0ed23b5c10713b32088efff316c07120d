{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/thomas.bakker/Desktop/Udemy/next-js/nextjs-project/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/thomas.bakker/Desktop/Udemy/next-js/nextjs-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport classes from \"./contact-form.module.css\";\nimport Notification from \"../ui/notification\";\nimport { useEffect, useState } from \"react\";\n\nvar sendContactData = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(contactDetails) {\n    var response, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"/api/contact\", {\n              method: \"POST\",\n              body: JSON.stringify(contactDetails),\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.json();\n\n          case 5:\n            data = _context.sent;\n\n            if (response.ok) {\n              _context.next = 8;\n              break;\n            }\n\n            throw new Error(data.message || \"Something went wrong \");\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function sendContactData(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar ContactForm = function ContactForm(props) {\n  var _useState = useState(\"\"),\n      enteredEmail = _useState[0],\n      setEnteredEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      enteredName = _useState2[0],\n      setEnteredName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      enteredMessage = _useState3[0],\n      setEnteredMessage = _useState3[1];\n\n  var _useState4 = useState(),\n      requestStatus = _useState4[0],\n      setRequestStatus = _useState4[1];\n\n  var _useState5 = useState(),\n      errorMessage = _useState5[0],\n      setErrorMessage = _useState5[1];\n\n  useEffect(function () {\n    if (requestStatus === \"success\" || requestStatus === \"error\") {\n      var timer = setTimeout(function () {\n        setRequestStatus(null);\n        setErrorMessage();\n      }, 3000);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n  }, [requestStatus]);\n\n  var sendMessageHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              setRequestStatus(\"pending\");\n              _context2.prev = 2;\n              _context2.next = 5;\n              return sendContactData({\n                email: enteredEmail,\n                name: enteredName,\n                message: enteredMessage\n              });\n\n            case 5:\n              _context2.next = 11;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](2);\n              setRequestStatus(\"error\");\n              setErrorMessage(_context2.t0);\n\n            case 11:\n              setRequestStatus(\"success\");\n              setEnteredMessage(\"\");\n              setEnteredName(\"\");\n              setEnteredEmail(\"\");\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 7]]);\n    }));\n\n    return function sendMessageHandler(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var notification;\n\n  if (requestStatus === \"pending\") {\n    notification = {\n      status: \"pending\",\n      title: \"Sending message...\",\n      message: \"Your message on way\"\n    };\n  }\n\n  if (requestStatus === \"success\") {\n    notification = {\n      status: \"success\",\n      title: \"success message...\",\n      message: \"Your message success way\"\n    };\n  }\n\n  if (requestStatus === \"error\") {\n    notification = {\n      status: \"error\",\n      title: \"error message...\",\n      message: errorMessage\n    };\n  }\n\n  return /*#__PURE__*/_jsxs(\"section\", {\n    className: classes.contact,\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: \"How I can help you?\"\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: classes.form,\n      onSubmit: sendMessageHandler,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: classes.controls,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"email\",\n            children: \"Your Email\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            required: true,\n            value: enteredEmail,\n            onChange: function onChange(ev) {\n              return setEnteredEmail(ev.target.value);\n            }\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            htmlFor: \"name\",\n            children: \"Your Name\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            id: \"name\",\n            required: true,\n            value: enteredName,\n            onChange: function onChange(ev) {\n              return setEnteredName(ev.target.value);\n            }\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: classes.control,\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"message\",\n          children: \"Your Message\"\n        }), /*#__PURE__*/_jsx(\"textarea\", {\n          id: \"message\",\n          rows: \"5\",\n          required: true,\n          value: enteredMessage,\n          onChange: function onChange(ev) {\n            return setEnteredMessage(ev.target.value);\n          }\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsx(\"button\", {\n          children: \"Send Message\"\n        })\n      })]\n    }), notification && /*#__PURE__*/_jsx(Notification, {\n      status: notification.status,\n      title: notification.title,\n      message: notification.message\n    })]\n  });\n};\n\nexport default ContactForm;","map":null,"metadata":{},"sourceType":"module"}